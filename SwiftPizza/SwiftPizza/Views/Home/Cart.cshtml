@model SwiftPizza.Views.Home.CartModel

<style>
    .container {
        display: flex;
        height: 100vh;
        overflow: hidden;
    }

    .section {
        flex: 1;
        overflow-y: auto;
        padding: 1rem;
        border: 2px solid white; /* This adds a white border to each section */
        background-color: rgba(0, 0, 0, 0.2); /* This gives a slightly darker background to the sections */
        margin: 1rem; /* This adds a bit of spacing between the sections */
    }

    .white-table th, .white-table td {
        color: white !important;
    }
</style>


<div class="container">
    <!-- Left section for Menu -->
    <div class="section">
        <h2>Menu</h2>
        @foreach (var pizza in Model.Pizzas)
        {
            <div>
                <img src="@pizza.PizzaImage" alt="@pizza.PizzaName" width="100" height="100" style="border-radius: 15px;">
                <br>
                <span>@pizza.PizzaName</span> - <small>@pizza.PizzaDescription</small>
                <button onclick="addPizzaToCart('@pizza.PizzaId', '@pizza.PizzaName', @pizza.PizzaPrice)">+</button>
                <button onclick="removePizzaFromCart('@pizza.PizzaId')">-</button>
            </div>
        }
    </div>

    <!-- Right section for Cart -->
    <div class="section">
        <h2>Your Cart</h2>
        <div id="cartItems"></div>
        <div>
            Total: $<span id="totalPrice">0</span>
        </div>
        <button id="proceedToPaymentBtn" style="display: none;" onclick="togglePaymentSection()">Proceed to Payment</button>

        <div id="paymentSection" style="display: none;">
            <!-- Add your payment fields and controls here -->
            <h3>Payment Details:</h3>
            Card Number: <input type="text" id="cardNumber"><br>
            Expiry: <input type="text" id="expiry"><br>
            CVV: <input type="text" id="cvv"><br>
            <button onclick="makePayment()">Pay Now</button>
        </div>
    </div>
</div>

<script>
    let cart = {};

    function updateCartDisplay() {
        const cartItemsDiv = document.getElementById('cartItems');
        let totalPrice = 0;
        let itemsHtml = '';

        for (let pizzaId in cart) {
            const pizza = cart[pizzaId];
            totalPrice += pizza.price * pizza.quantity;
            itemsHtml += `<div>${pizza.name} x ${pizza.quantity} = $${pizza.price * pizza.quantity}</div>`;
        }

        cartItemsDiv.innerHTML = itemsHtml;
        document.getElementById('totalPrice').innerText = totalPrice;

        const proceedToPaymentBtn = document.getElementById('proceedToPaymentBtn');
        if (totalPrice > 0) {
            proceedToPaymentBtn.style.display = 'block';
        } else {
            proceedToPaymentBtn.style.display = 'none';
        }
    }

    function addPizzaToCart(pizzaId, pizzaName, pizzaPrice) {
        if (!cart[pizzaId]) {
            cart[pizzaId] = { name: pizzaName, price: pizzaPrice, quantity: 0 };
        }

        cart[pizzaId].quantity++;
        updateCartDisplay();
    }

    function removePizzaFromCart(pizzaId) {
        if (cart[pizzaId] && cart[pizzaId].quantity > 0) {
            cart[pizzaId].quantity--;

            if (cart[pizzaId].quantity === 0) {
                delete cart[pizzaId];
            }

            updateCartDisplay();
        }
    }

    function togglePaymentSection() {
        const paymentSection = document.getElementById('paymentSection');
        if (paymentSection.style.display === 'none') {
            paymentSection.style.display = 'block';
        } else {
            paymentSection.style.display = 'none';
        }
    }

    function makePayment() {
        // Add your payment processing logic here.
        alert('Payment made!'); // Just a placeholder for now.
    }
</script>
